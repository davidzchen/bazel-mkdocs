---
layout: documentation
title: ctx
---
<h1 id="modules.ctx">ctx</h1>

The context of the rule containing helper functions and information about attributes, depending targets and outputs. You get a ctx object as an argument to the <code>implementation</code> function when you create a rule.

<div class="toc">
  <h2>Methods</h2>
  <ul>
          <li><a href="#action">action</a></li>
              <li><a href="#actions">actions</a></li>
              <li><a href="#aspect_ids">aspect_ids</a></li>
              <li><a href="#attr">attr</a></li>
              <li><a href="#bin_dir">bin_dir</a></li>
              <li><a href="#build_file_path">build_file_path</a></li>
              <li><a href="#configuration">configuration</a></li>
              <li><a href="#coverage_instrumented">coverage_instrumented</a></li>
              <li><a href="#created_actions">created_actions</a></li>
              <li><a href="#default_provider">default_provider</a></li>
              <li><a href="#empty_action">empty_action</a></li>
              <li><a href="#executable">executable</a></li>
              <li><a href="#expand_location">expand_location</a></li>
              <li><a href="#expand_make_variables">expand_make_variables</a></li>
              <li><a href="#features">features</a></li>
              <li><a href="#file">file</a></li>
              <li><a href="#file_action">file_action</a></li>
              <li><a href="#files">files</a></li>
              <li><a href="#fragments">fragments</a></li>
              <li><a href="#genfiles_dir">genfiles_dir</a></li>
              <li><a href="#host_configuration">host_configuration</a></li>
              <li><a href="#host_fragments">host_fragments</a></li>
              <li><a href="#label">label</a></li>
              <li><a href="#new_file(sibling_file, basename)">new_file(sibling_file, basename)</a></li>
              <li><a href="#new_file(filename)">new_file(filename)</a></li>
              <li><a href="#outputs">outputs</a></li>
              <li><a href="#resolve_command">resolve_command</a></li>
              <li><a href="#rule">rule</a></li>
              <li><a href="#runfiles">runfiles</a></li>
              <li><a href="#split_attr">split_attr</a></li>
              <li><a href="#template_action">template_action</a></li>
              <li><a href="#toolchains">toolchains</a></li>
              <li><a href="#var">var</a></li>
              <li><a href="#workspace_name">workspace_name</a></li>
        </ul>
</div>

      <h2 id="action">action</h2>
        <p><pre class="rule-signature"><a class="anchor" href="globals.html#None">None</a> ctx.action(outputs, inputs=[], executable=None, arguments=[], mnemonic=None, command=None, progress_message=None, use_default_shell_env=False, env=None, execution_requirements=None, input_manifests=None)
</pre></p>

    DEPRECATED. Use <a href="actions.html#run">ctx.actions.run()</a> or <a href="actions.html#run_shell">ctx.actions.run_shell()</a>. <br>Creates an action that runs an executable or a shell command. You must specify either <code>command</code> or <code>executable</code>.
Actions and genrules are very similar, but have different use cases. Actions are used inside rules, and genrules are used inside macros. Genrules also have make variable expansion.

          <h3>Parameters</h3>
      <table class="table table-bordered table-condensed table-params">
        <colgroup>
          <col class="col-param">
          <col class="param-description">
        </colgroup>
        <thead>
          <tr>
            <th>Parameter</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
                  <tr>
            <td id="action.outputs">
              <code>outputs</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="list.html">sequence</a> of <a class="anchor" href="File.html">File</a>s</code></p>
                          <p>list of the output files of the action.</p>
            </td>
          </tr>
                  <tr>
            <td id="action.inputs">
              <code>inputs</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="list.html">sequence</a>; or <a class="anchor" href="depset.html">depset</a></code></p>
                          <p>list of the input files of the action.</p>
            </td>
          </tr>
                  <tr>
            <td id="action.executable">
              <code>executable</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="File.html">File</a>; or <a class="anchor" href="string.html">string</a>; or <a class="anchor" href="globals.html#None">None</a></code></p>
                          <p>the executable file to be called by the action.</p>
            </td>
          </tr>
                  <tr>
            <td id="action.arguments">
              <code>arguments</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="list.html">sequence</a></code></p>
                          <p>command line arguments of the action.Must be a list of strings or actions.args() objects.</p>
            </td>
          </tr>
                  <tr>
            <td id="action.mnemonic">
              <code>mnemonic</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="string.html">string</a></code></p>
                          <p>a one-word description of the action, e.g. CppCompile or GoLink.</p>
            </td>
          </tr>
                  <tr>
            <td id="action.command">
              <code>command</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="string.html">string</a>; or <a class="anchor" href="list.html">sequence</a> of <a class="anchor" href="string.html">string</a>s; or <a class="anchor" href="globals.html#None">None</a></code></p>
                          <p>shell command to execute. It is usually preferable to use <code>executable</code> instead. Arguments are available with <code>$1</code>, <code>$2</code>, etc.</p>
            </td>
          </tr>
                  <tr>
            <td id="action.progress_message">
              <code>progress_message</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="string.html">string</a></code></p>
                          <p>progress message to show to the user during the build, e.g. "Compiling foo.cc to create foo.o".</p>
            </td>
          </tr>
                  <tr>
            <td id="action.use_default_shell_env">
              <code>use_default_shell_env</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="bool.html">bool</a></code></p>
                          <p>whether the action should use the built in shell environment or not.</p>
            </td>
          </tr>
                  <tr>
            <td id="action.env">
              <code>env</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="dict.html">dict</a></code></p>
                          <p>sets the dictionary of environment variables.</p>
            </td>
          </tr>
                  <tr>
            <td id="action.execution_requirements">
              <code>execution_requirements</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="dict.html">dict</a></code></p>
                          <p>information for scheduling the action. See <a href="/docs/be/common-definitions.html#common.tags">tags</a> for useful keys.</p>
            </td>
          </tr>
                  <tr>
            <td id="action.input_manifests">
              <code>input_manifests</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="list.html">sequence</a></code></p>
                          <p>(Experimental) sets the input runfiles metadata; they are typically generated by resolve_command.</p>
            </td>
          </tr>
                </tbody>
      </table>

        <h2 id="actions">actions</h2>
        <p><pre class="rule-signature"><a class="anchor" href="actions.html">actions</a> ctx.actions</pre></p>

    Functions to declare files and create actions.


        <h2 id="aspect_ids">aspect_ids</h2>
        <p><pre class="rule-signature"><a class="anchor" href="list.html">list</a> ctx.aspect_ids</pre></p>

    Returns a list ids for all aspects applied to the target. Only available in aspect implementation functions.


        <h2 id="attr">attr</h2>
        <p><pre class="rule-signature"><a class="anchor" href="struct.html">struct</a> ctx.attr</pre></p>

    A struct to access the values of the attributes. The values are provided by the user (if not, a default value is used).


        <h2 id="bin_dir">bin_dir</h2>
        <p><pre class="rule-signature"><a class="anchor" href="root.html">root</a> ctx.bin_dir</pre></p>

    The root corresponding to bin directory.


        <h2 id="build_file_path">build_file_path</h2>
        <p><pre class="rule-signature"><a class="anchor" href="string.html">string</a> ctx.build_file_path</pre></p>

    Returns path to the BUILD file for this rule, relative to the source root.


        <h2 id="configuration">configuration</h2>
        <p><pre class="rule-signature"><a class="anchor" href="configuration.html">configuration</a> ctx.configuration</pre></p>

    Returns the default configuration. See the <a href="configuration.html">configuration</a> type for more details.


        <h2 id="coverage_instrumented">coverage_instrumented</h2>
        <p><pre class="rule-signature"><a class="anchor" href="bool.html">bool</a> ctx.coverage_instrumented(target=None)</pre></p>

    Returns whether code coverage instrumentation should be generated when performing compilation actions for this rule or, if <code>target</code> is provided, the rule specified by that Target. (If a non-rule or a Skylark rule Target is provided, this returns False.) Checks if the sources of the current rule (if no Target is provided) orthe sources of Target should be instrumented based on the --instrumentation_filter and--instrument_test_targets config settings. This differs from <code>coverage_enabled</code> in the <a href="configuration.html">configuration</a>, which notes whether coverage data collection is enabled for the entire run, but not whether a specific target should be instrumented.

          <h3>Parameters</h3>
      <table class="table table-bordered table-condensed table-params">
        <colgroup>
          <col class="col-param">
          <col class="param-description">
        </colgroup>
        <thead>
          <tr>
            <th>Parameter</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
                  <tr>
            <td id="coverage_instrumented.target">
              <code>target</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="Target.html">Target</a></code></p>
                          <p>A Target specifying a rule. If not provided, defaults to the current rule.</p>
            </td>
          </tr>
                </tbody>
      </table>

        <h2 id="created_actions">created_actions</h2>
        <p><pre class="rule-signature">SkylarkValue ctx.created_actions()</pre></p>

    For rules with <a href="globals.html#rule._skylark_testable">_skylark_testable</a> set to <code>True</code>, this returns an <a href="globals.html#Actions">Actions</a> provider representing all actions created so far for the current rule. For all other rules, returns <code>None</code>. Note that the provider is not updated when subsequent actions are created, so you will have to call this function again if you wish to inspect them. <br/><br/>This is intended to help write tests for rule-implementation helper functions, which may take in a <code>ctx</code> object and create actions on it.


        <h2 id="default_provider">default_provider</h2>
        <p><pre class="rule-signature"><a class="anchor" href="Provider.html">Provider</a> ctx.default_provider</pre></p>

    Deprecated. Use <a href="globals.html#DefaultInfo">DefaultInfo</a> instead.


        <h2 id="empty_action">empty_action</h2>
        <p><pre class="rule-signature"><a class="anchor" href="globals.html#None">None</a> ctx.empty_action(mnemonic, inputs=[])
</pre></p>

    DEPRECATED. Use <a href="actions.html#do_nothing">ctx.actions.do_nothing</a> instead. <br>Creates an empty action that neither executes a command nor produces any output, but that is useful for inserting 'extra actions'.

          <h3>Parameters</h3>
      <table class="table table-bordered table-condensed table-params">
        <colgroup>
          <col class="col-param">
          <col class="param-description">
        </colgroup>
        <thead>
          <tr>
            <th>Parameter</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
                  <tr>
            <td id="empty_action.mnemonic">
              <code>mnemonic</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="string.html">string</a></code></p>
                          <p>a one-word description of the action, e.g. CppCompile or GoLink.</p>
            </td>
          </tr>
                  <tr>
            <td id="empty_action.inputs">
              <code>inputs</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="list.html">sequence</a>; or <a class="anchor" href="depset.html">depset</a></code></p>
                          <p>list of the input files of the action.</p>
            </td>
          </tr>
                </tbody>
      </table>

        <h2 id="executable">executable</h2>
        <p><pre class="rule-signature"><a class="anchor" href="struct.html">struct</a> ctx.executable</pre></p>

    A <code>struct</code> containing executable files defined in label type attributes marked as <code>executable=True</code>. The struct fields correspond to the attribute names. Each value in the struct is either a <code>file</code> or <code>None</code>. If an optional attribute is not specified in the rule then the corresponding struct value is <code>None</code>. If a label type is not marked as <code>executable=True</code>, no corresponding struct field is generated.


        <h2 id="expand_location">expand_location</h2>
        <p><pre class="rule-signature"><a class="anchor" href="string.html">string</a> ctx.expand_location(input, targets=[])
</pre></p>

    Expands all <code>$(location ...)</code> templates in the given string by replacing <code>$(location //x)</code> with the path of the output file of target //x. Expansion only works for labels that point to direct dependencies of this rule or that are explicitly listed in the optional argument <code>targets</code>. <br/><br/><code>$(location ...)</code> will cause an error if the referenced target has multiple outputs. In this case, please use <code>$(locations ...)</code> since it produces a space-separated list of output paths. It can be safely used for a single output file, too.

          <h3>Parameters</h3>
      <table class="table table-bordered table-condensed table-params">
        <colgroup>
          <col class="col-param">
          <col class="param-description">
        </colgroup>
        <thead>
          <tr>
            <th>Parameter</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
                  <tr>
            <td id="expand_location.input">
              <code>input</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="string.html">string</a></code></p>
                          <p>string to be expanded.</p>
            </td>
          </tr>
                  <tr>
            <td id="expand_location.targets">
              <code>targets</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="list.html">sequence</a> of Targets</code></p>
                          <p>list of targets for additional lookup information.</p>
            </td>
          </tr>
                </tbody>
      </table>

        <h2 id="expand_make_variables">expand_make_variables</h2>
        <p><pre class="rule-signature"><a class="anchor" href="string.html">string</a> ctx.expand_make_variables()</pre></p>

    <b>Deprecated.</b> Use <code>ctx.var</code> to access the variables instead.<br>Returns a string after expanding all references to "Make variables". The variables must have the following format: <code>$(VAR_NAME)</code>. Also, <code>$$VAR_NAME</code> expands to <code>$VAR_NAME</code>. Parameters:<ul><li>The name of the attribute (<code>string</code>). It's only used for error reporting.</li>
<li>The expression to expand (<code>string</code>). It can contain references to "Make variables".</li>
<li>A mapping of additional substitutions (<code>dict</code> of <code>string</code> : <code>string</code>).</li></ul>
Examples:<pre class=language-python>
ctx.expand_make_variables("cmd", "$(MY_VAR)", {"MY_VAR": "Hi"})  # == "Hi"
ctx.expand_make_variables("cmd", "$$PWD", {})  # == "$PWD"
</pre>Additional variables may come from other places, such as configurations. Note that this function is experimental.


        <h2 id="features">features</h2>
        <p><pre class="rule-signature"><a class="anchor" href="list.html">list</a> ctx.features</pre></p>

    Returns the set of features that are enabled for this rule.


        <h2 id="file">file</h2>
        <p><pre class="rule-signature"><a class="anchor" href="struct.html">struct</a> ctx.file</pre></p>

    A <code>struct</code> containing files defined in label type attributes marked as <code>single_file=True</code>. The struct fields correspond to the attribute names. The struct value is always a <code>file</code> or <code>None</code>. If an optional attribute is not specified in the rule then the corresponding struct value is <code>None</code>. If a label type is not marked as <code>single_file=True</code>, no corresponding struct field is generated. It is a shortcut for:<pre class=language-python>list(ctx.attr.&lt;ATTR&gt;.files)[0]</pre>


        <h2 id="file_action">file_action</h2>
        <p><pre class="rule-signature"><a class="anchor" href="globals.html#None">None</a> ctx.file_action(output, content, executable=False)
</pre></p>

    DEPRECATED. Use <a href ="actions.html#write">ctx.actions.write</a> instead. <br>Creates a file write action.

          <h3>Parameters</h3>
      <table class="table table-bordered table-condensed table-params">
        <colgroup>
          <col class="col-param">
          <col class="param-description">
        </colgroup>
        <thead>
          <tr>
            <th>Parameter</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
                  <tr>
            <td id="file_action.output">
              <code>output</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="File.html">File</a></code></p>
                          <p>the output file.</p>
            </td>
          </tr>
                  <tr>
            <td id="file_action.content">
              <code>content</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="string.html">string</a></code></p>
                          <p>the contents of the file.</p>
            </td>
          </tr>
                  <tr>
            <td id="file_action.executable">
              <code>executable</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="bool.html">bool</a></code></p>
                          <p>whether the output file should be executable (default is False).</p>
            </td>
          </tr>
                </tbody>
      </table>

        <h2 id="files">files</h2>
        <p><pre class="rule-signature"><a class="anchor" href="struct.html">struct</a> ctx.files</pre></p>

    A <code>struct</code> containing files defined in label or label list type attributes. The struct fields correspond to the attribute names. The struct values are <code>list</code> of <code>file</code>s. If an optional attribute is not specified in the rule, an empty list is generated. It is a shortcut for:<pre class=language-python>[f for t in ctx.attr.&lt;ATTR&gt; for f in t.files]</pre>


        <h2 id="fragments">fragments</h2>
        <p><pre class="rule-signature"><a class="anchor" href="fragments.html">fragments</a> ctx.fragments</pre></p>

    Allows access to configuration fragments in target configuration.


        <h2 id="genfiles_dir">genfiles_dir</h2>
        <p><pre class="rule-signature"><a class="anchor" href="root.html">root</a> ctx.genfiles_dir</pre></p>

    The root corresponding to genfiles directory.


        <h2 id="host_configuration">host_configuration</h2>
        <p><pre class="rule-signature"><a class="anchor" href="configuration.html">configuration</a> ctx.host_configuration</pre></p>

    Returns the host configuration. See the <a href="configuration.html">configuration</a> type for more details.


        <h2 id="host_fragments">host_fragments</h2>
        <p><pre class="rule-signature"><a class="anchor" href="fragments.html">fragments</a> ctx.host_fragments</pre></p>

    Allows access to configuration fragments in host configuration.


        <h2 id="label">label</h2>
        <p><pre class="rule-signature"><a class="anchor" href="Label.html">Label</a> ctx.label</pre></p>

    The label of this rule.


        <h2 id="new_file(sibling_file, basename)">new_file(sibling_file, basename)</h2>
        <p><pre class="rule-signature"><a class="anchor" href="File.html">File</a> ctx.new_file(sibling_file, basename)</pre></p>

    Creates a new file object in the same directory as the original file. Does not actually create a file on the file system, just declares that some action will do so. You must create an action that generates the file. If the file should be visible to other rules, declare a rule output instead when possible. Doing so enables Bazel to associate a label with the file that rules can refer to (allowing finer dependency control) instead of referencing the whole rule.

          <h3>Parameters</h3>
      <table class="table table-bordered table-condensed table-params">
        <colgroup>
          <col class="col-param">
          <col class="param-description">
        </colgroup>
        <thead>
          <tr>
            <th>Parameter</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
                  <tr>
            <td id="new_file(sibling_file, basename).sibling_file">
              <code>sibling_file</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="File.html">File</a></code></p>
                          <p>A file that lives in the same directory as the newly created file.</p>
            </td>
          </tr>
                  <tr>
            <td id="new_file(sibling_file, basename).basename">
              <code>basename</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="string.html">string</a></code></p>
                          <p>The base name of the newly created file.</p>
            </td>
          </tr>
                </tbody>
      </table>

        <h2 id="new_file(filename)">new_file(filename)</h2>
        <p><pre class="rule-signature"><a class="anchor" href="File.html">File</a> ctx.new_file(filename)</pre></p>

    DEPRECATED. Use <a href="actions.html#declare_file">ctx.actions.declare_file</a>. <br>Creates a file object with the given filename, in the current package. Does not actually create a file on the file system, just declares that some action will do so. You must create an action that generates the file. If the file should be visible to other rules, declare a rule output instead when possible. Doing so enables Bazel to associate a label with the file that rules can refer to (allowing finer dependency control) instead of referencing the whole rule.

          <h3>Parameters</h3>
      <table class="table table-bordered table-condensed table-params">
        <colgroup>
          <col class="col-param">
          <col class="param-description">
        </colgroup>
        <thead>
          <tr>
            <th>Parameter</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
                  <tr>
            <td id="new_file(filename).filename">
              <code>filename</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="string.html">string</a></code></p>
                          <p>The path of the new file, relative to the current package.</p>
            </td>
          </tr>
                </tbody>
      </table>

        <h2 id="outputs">outputs</h2>
        <p><pre class="rule-signature"><a class="anchor" href="struct.html">struct</a> ctx.outputs</pre></p>

    A <code>struct</code> containing all the output files. The struct is generated the following way:<br><ul><li>If the rule is marked as <code>executable=True</code> the struct has an "executable" field with the rules default executable <code>file</code> value.<li>For every entry in the rule's <code>outputs</code> dict an attr is generated with the same name and the corresponding <code>file</code> value.<li>For every output type attribute a struct attribute is generated with the same name and the corresponding <code>file</code> value or <code>None</code>, if no value is specified in the rule.<li>For every output list type attribute a struct attribute is generated with the same name and corresponding <code>list</code> of <code>file</code>s value (an empty list if no value is specified in the rule).</ul>


        <h2 id="resolve_command">resolve_command</h2>
        <p><pre class="rule-signature"><a class="anchor" href="list.html">tuple</a> ctx.resolve_command(command='', attribute=None, expand_locations=False, make_variables=None, tools=[], label_dict={}, execution_requirements={})
</pre></p>

    <i>(Experimental)</i> Returns a tuple <code>(inputs, command, input_manifests)</code> of the list of resolved inputs, the argv list for the resolved command, and the runfiles metadatarequired to run the command, all of them suitable for passing as the same-named arguments of the <code>ctx.action</code> method.

          <h3>Parameters</h3>
      <table class="table table-bordered table-condensed table-params">
        <colgroup>
          <col class="col-param">
          <col class="param-description">
        </colgroup>
        <thead>
          <tr>
            <th>Parameter</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
                  <tr>
            <td id="resolve_command.command">
              <code>command</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="string.html">string</a></code></p>
                          <p>command to resolve.</p>
            </td>
          </tr>
                  <tr>
            <td id="resolve_command.attribute">
              <code>attribute</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="string.html">string</a></code></p>
                          <p>name of the associated attribute for which to issue an error, or None.</p>
            </td>
          </tr>
                  <tr>
            <td id="resolve_command.expand_locations">
              <code>expand_locations</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="bool.html">bool</a></code></p>
                          <p>shall we expand $(location) variables? See <a href="#expand_location">ctx.expand_location()</a> for more details.</p>
            </td>
          </tr>
                  <tr>
            <td id="resolve_command.make_variables">
              <code>make_variables</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="dict.html">dict</a></code></p>
                          <p>make variables to expand, or None.</p>
            </td>
          </tr>
                  <tr>
            <td id="resolve_command.tools">
              <code>tools</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="list.html">sequence</a> of <a class="anchor" href="Target.html">Target</a>s</code></p>
                          <p>list of tools (list of targets).</p>
            </td>
          </tr>
                  <tr>
            <td id="resolve_command.label_dict">
              <code>label_dict</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="dict.html">dict</a></code></p>
                          <p>dictionary of resolved labels and the corresponding list of Files (a dict of Label : list of Files)</p>
            </td>
          </tr>
                  <tr>
            <td id="resolve_command.execution_requirements">
              <code>execution_requirements</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="dict.html">dict</a></code></p>
                          <p>information for scheduling the action to resolve this command. See <a href="/docs/be/common-definitions.html#common.tags">tags</a> for useful keys.</p>
            </td>
          </tr>
                </tbody>
      </table>

        <h2 id="rule">rule</h2>
        <p><pre class="rule-signature"><a class="anchor" href="rule_attributes.html">rule_attributes</a> ctx.rule</pre></p>

    Returns rule attributes descriptor for the rule that aspect is applied to. Only available in aspect implementation functions.


        <h2 id="runfiles">runfiles</h2>
        <p><pre class="rule-signature"><a class="anchor" href="runfiles.html">runfiles</a> ctx.runfiles(files=[], transitive_files=None, collect_data=False, collect_default=False, symlinks={}, root_symlinks={})
</pre></p>

    Creates a runfiles object.

          <h3>Parameters</h3>
      <table class="table table-bordered table-condensed table-params">
        <colgroup>
          <col class="col-param">
          <col class="param-description">
        </colgroup>
        <thead>
          <tr>
            <th>Parameter</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
                  <tr>
            <td id="runfiles.files">
              <code>files</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="list.html">sequence</a> of <a class="anchor" href="File.html">File</a>s</code></p>
                          <p>The list of files to be added to the runfiles.</p>
            </td>
          </tr>
                  <tr>
            <td id="runfiles.transitive_files">
              <code>transitive_files</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="depset.html">depset</a> of <a class="anchor" href="File.html">File</a>s</code></p>
                          <p>The (transitive) set of files to be added to the runfiles. The depset should use the `default` order (which, as the name implies, is the default).</p>
            </td>
          </tr>
                  <tr>
            <td id="runfiles.collect_data">
              <code>collect_data</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="bool.html">bool</a></code></p>
                          <p>Whether to collect the data runfiles from the dependencies in srcs, data and deps attributes.</p>
            </td>
          </tr>
                  <tr>
            <td id="runfiles.collect_default">
              <code>collect_default</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="bool.html">bool</a></code></p>
                          <p>Whether to collect the default runfiles from the dependencies in srcs, data and deps attributes.</p>
            </td>
          </tr>
                  <tr>
            <td id="runfiles.symlinks">
              <code>symlinks</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="dict.html">dict</a></code></p>
                          <p>The map of symlinks to be added to the runfiles, prefixed by workspace name.</p>
            </td>
          </tr>
                  <tr>
            <td id="runfiles.root_symlinks">
              <code>root_symlinks</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="dict.html">dict</a></code></p>
                          <p>The map of symlinks to be added to the runfiles.</p>
            </td>
          </tr>
                </tbody>
      </table>

        <h2 id="split_attr">split_attr</h2>
        <p><pre class="rule-signature"><a class="anchor" href="struct.html">struct</a> ctx.split_attr</pre></p>

    A struct to access the values of attributes with split configurations. If the attribute is a label list, the value of split_attr is a dict of the keys of the split (as strings) to lists of the ConfiguredTargets in that branch of the split. If the attribute is a label, then the value of split_attr is a dict of the keys of the split (as strings) to single ConfiguredTargets. Attributes with split configurations still appear in the attr struct, but their values will be single lists with all the branches of the split merged together.


        <h2 id="template_action">template_action</h2>
        <p><pre class="rule-signature"><a class="anchor" href="globals.html#None">None</a> ctx.template_action(template, output, substitutions, executable=False)
</pre></p>

    DEPRECATED. Use <a href="actions.html#expand_template">ctx.actions.expand_template()</a> instead.<br>Creates a template expansion action.

          <h3>Parameters</h3>
      <table class="table table-bordered table-condensed table-params">
        <colgroup>
          <col class="col-param">
          <col class="param-description">
        </colgroup>
        <thead>
          <tr>
            <th>Parameter</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
                  <tr>
            <td id="template_action.template">
              <code>template</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="File.html">File</a></code></p>
                          <p>the template file, which is a UTF-8 encoded text file.</p>
            </td>
          </tr>
                  <tr>
            <td id="template_action.output">
              <code>output</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="File.html">File</a></code></p>
                          <p>the output file, which is a UTF-8 encoded text file.</p>
            </td>
          </tr>
                  <tr>
            <td id="template_action.substitutions">
              <code>substitutions</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="dict.html">dict</a></code></p>
                          <p>substitutions to make when expanding the template.</p>
            </td>
          </tr>
                  <tr>
            <td id="template_action.executable">
              <code>executable</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="bool.html">bool</a></code></p>
                          <p>whether the output file should be executable (default is False).</p>
            </td>
          </tr>
                </tbody>
      </table>

        <h2 id="toolchains">toolchains</h2>
        <p><pre class="rule-signature">SkylarkIndexable ctx.toolchains</pre></p>

    Toolchains required for this rule.


        <h2 id="var">var</h2>
        <p><pre class="rule-signature"><a class="anchor" href="dict.html">dict</a> ctx.var</pre></p>

    Dictionary (String to String) of configuration variables.


        <h2 id="workspace_name">workspace_name</h2>
        <p><pre class="rule-signature"><a class="anchor" href="string.html">string</a> ctx.workspace_name</pre></p>

    Returns the workspace name as defined in the WORKSPACE file.



