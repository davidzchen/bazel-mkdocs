---
layout: documentation
title: java_common
---
<h1 id="modules.java_common">java_common</h1>

Utilities for Java compilation support in Skylark.

<div class="toc">
  <h2>Methods</h2>
  <ul>
          <li><a href="#compile">compile</a></li>
              <li><a href="#create_provider">create_provider</a></li>
              <li><a href="#JavaRuntimeInfo">JavaRuntimeInfo</a></li>
              <li><a href="#make_non_strict">make_non_strict</a></li>
              <li><a href="#merge">merge</a></li>
              <li><a href="#provider">provider</a></li>
        </ul>
</div>

      <h2 id="compile">compile</h2>
        <p><pre class="rule-signature"><a class="anchor" href="JavaInfo.html">JavaInfo</a> java_common.compile(arg0:<a class="anchor" href="ctx.html">ctx</a>, *, source_jars=[], source_files=[], output, javac_opts=[], deps=[], exports=[], plugins=[], exported_plugins=[], strict_deps='ERROR', java_toolchain, host_javabase, sourcepath=[], resources=[])</pre></p>

    Compiles Java source files/jars from the implementation of a Skylark rule and returns a provider that represents the results of the compilation and can be added to the set of providers emitted by this rule.

          <h3>Parameters</h3>
      <table class="table table-bordered table-condensed table-params">
        <colgroup>
          <col class="col-param">
          <col class="param-description">
        </colgroup>
        <thead>
          <tr>
            <th>Parameter</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
                  <tr>
            <td id="compile.source_jars">
              <code>source_jars</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="list.html">sequence</a> of <a class="anchor" href="File.html">File</a>s</code></p>
                          <p>A list of the jars to be compiled. At least one of source_jars or source_files should be specified.</p>
            </td>
          </tr>
                  <tr>
            <td id="compile.source_files">
              <code>source_files</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="list.html">sequence</a> of <a class="anchor" href="File.html">File</a>s</code></p>
                          <p>A list of the Java source files to be compiled. At least one of source_jars or source_files should be specified.</p>
            </td>
          </tr>
                  <tr>
            <td id="compile.output">
              <code>output</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="File.html">File</a></code></p>
                          <p></p>
            </td>
          </tr>
                  <tr>
            <td id="compile.javac_opts">
              <code>javac_opts</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="list.html">sequence</a> of <a class="anchor" href="string.html">string</a>s</code></p>
                          <p>A list of the desired javac options. Optional.</p>
            </td>
          </tr>
                  <tr>
            <td id="compile.deps">
              <code>deps</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="list.html">sequence</a> of <a class="anchor" href="JavaInfo.html">JavaInfo</a>s</code></p>
                          <p>A list of dependencies. Optional.</p>
            </td>
          </tr>
                  <tr>
            <td id="compile.exports">
              <code>exports</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="list.html">sequence</a> of <a class="anchor" href="JavaInfo.html">JavaInfo</a>s</code></p>
                          <p>A list of exports. Optional.</p>
            </td>
          </tr>
                  <tr>
            <td id="compile.plugins">
              <code>plugins</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="list.html">sequence</a> of <a class="anchor" href="JavaInfo.html">JavaInfo</a>s</code></p>
                          <p>A list of plugins. Optional.</p>
            </td>
          </tr>
                  <tr>
            <td id="compile.exported_plugins">
              <code>exported_plugins</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="list.html">sequence</a> of <a class="anchor" href="JavaInfo.html">JavaInfo</a>s</code></p>
                          <p>A list of exported plugins. Optional.</p>
            </td>
          </tr>
                  <tr>
            <td id="compile.strict_deps">
              <code>strict_deps</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="string.html">string</a></code></p>
                          <p>A string that specifies how to handle strict deps. Possible values: 'OFF', 'ERROR','WARN' and 'DEFAULT'. For more details see https://docs.bazel.build/versions/master/bazel-user-manual.html#flag--strict_java_deps. By default 'ERROR'.</p>
            </td>
          </tr>
                  <tr>
            <td id="compile.java_toolchain">
              <code>java_toolchain</code>
            </td>
            <td>
                          <p><code>Target</code></p>
                          <p>A label pointing to a java_toolchain rule to be used for this compilation. Mandatory.</p>
            </td>
          </tr>
                  <tr>
            <td id="compile.host_javabase">
              <code>host_javabase</code>
            </td>
            <td>
                          <p><code>Target</code></p>
                          <p>A label pointing to a JDK to be used for this compilation. Mandatory.</p>
            </td>
          </tr>
                  <tr>
            <td id="compile.sourcepath">
              <code>sourcepath</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="list.html">sequence</a> of <a class="anchor" href="File.html">File</a>s</code></p>
                          <p></p>
            </td>
          </tr>
                  <tr>
            <td id="compile.resources">
              <code>resources</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="list.html">sequence</a> of <a class="anchor" href="File.html">File</a>s</code></p>
                          <p></p>
            </td>
          </tr>
                </tbody>
      </table>

        <h2 id="create_provider">create_provider</h2>
        <p><pre class="rule-signature"><a class="anchor" href="JavaInfo.html">JavaInfo</a> java_common.create_provider(actions=None, *, compile_time_jars=[], runtime_jars=[], use_ijar=True, java_toolchain=None, transitive_compile_time_jars=[], transitive_runtime_jars=[], source_jars=[])</pre></p>

    Creates a JavaInfo from jars. compile_time/runtime_jars represent the outputs of the target providing a JavaInfo, while transitive_*_jars represent their dependencies.<p>Note: compile_time_jars and runtime_jars are not automatically merged into the transitive jars (unless the given transitive_*_jars are empty) - if this is the desired behaviour the user should merge the jars before creating the provider.<p>This function also creates actions to generate interface jars by default.<p>When use_ijar is True, ijar will be run on the given compile_time_jars and the resulting interface jars will be stored as compile_jars, while the initila jars will be stored as full_compile_jars. <p>When use_ijar=False, the given compile_time_jars will be stored as both compile_jars and full_compile_jars. No actions are created. See JavaInfo#compile_jars and JavaInfo#full_compile_jars for more details.<p>Currently only <a href='https://github.com/bazelbuild/bazel/tree/master/third_party/ijar'>ijar</a> is supported for generating interface jars. Header compilation is not yet supported.

          <h3>Parameters</h3>
      <table class="table table-bordered table-condensed table-params">
        <colgroup>
          <col class="col-param">
          <col class="param-description">
        </colgroup>
        <thead>
          <tr>
            <th>Parameter</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
                  <tr>
            <td id="create_provider.actions">
              <code>actions</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="actions.html">actions</a></code></p>
                          <p>The ctx.actions object, used to register the actions for creating the interface jars. Only set if use_ijar=True.</p>
            </td>
          </tr>
                  <tr>
            <td id="create_provider.compile_time_jars">
              <code>compile_time_jars</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="list.html">sequence</a>; or <a class="anchor" href="depset.html">depset</a></code></p>
                          <p>A list or a set of jars that should be used at compilation for a given target.</p>
            </td>
          </tr>
                  <tr>
            <td id="create_provider.runtime_jars">
              <code>runtime_jars</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="list.html">sequence</a>; or <a class="anchor" href="depset.html">depset</a></code></p>
                          <p>A list or a set of jars that should be used at runtime for a given target.</p>
            </td>
          </tr>
                  <tr>
            <td id="create_provider.use_ijar">
              <code>use_ijar</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="bool.html">bool</a></code></p>
                          <p>If True it will generate interface jars for every jar in compile_time_jars.The generating interface jars will be stored as compile_jars and the initial (full) compile_time_jars will be stored as full_compile_jars.If False the given compile_jars will be stored as both compile_jars and full_compile_jars.</p>
            </td>
          </tr>
                  <tr>
            <td id="create_provider.java_toolchain">
              <code>java_toolchain</code>
            </td>
            <td>
                          <p><code>Target</code></p>
                          <p>A label pointing to a java_toolchain rule to be used for retrieving the ijar tool. Only set when use_ijar is True.</p>
            </td>
          </tr>
                  <tr>
            <td id="create_provider.transitive_compile_time_jars">
              <code>transitive_compile_time_jars</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="list.html">sequence</a>; or <a class="anchor" href="depset.html">depset</a></code></p>
                          <p>A list or set of compile time jars collected from the transitive closure of a rule.</p>
            </td>
          </tr>
                  <tr>
            <td id="create_provider.transitive_runtime_jars">
              <code>transitive_runtime_jars</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="list.html">sequence</a>; or <a class="anchor" href="depset.html">depset</a></code></p>
                          <p>A list or set of runtime jars collected from the transitive closure of a rule.</p>
            </td>
          </tr>
                  <tr>
            <td id="create_provider.source_jars">
              <code>source_jars</code>
            </td>
            <td>
                          <p><code><a class="anchor" href="list.html">sequence</a>; or <a class="anchor" href="depset.html">depset</a></code></p>
                          <p>A list or set of output source jars that contain the uncompiled source files including the source files generated by annotation processors if the case.</p>
            </td>
          </tr>
                </tbody>
      </table>

        <h2 id="JavaRuntimeInfo">JavaRuntimeInfo</h2>
        <p><pre class="rule-signature"><a class="anchor" href="Provider.html">Provider</a> java_common.JavaRuntimeInfo</pre></p>

    The key used to retrieve the provider that contains information about the Java runtime being used.


        <h2 id="make_non_strict">make_non_strict</h2>
        <p><pre class="rule-signature"><a class="anchor" href="JavaInfo.html">JavaInfo</a> java_common.make_non_strict(arg0:<a class="anchor" href="JavaInfo.html">JavaInfo</a>)</pre></p>

    Returns a new Java provider whose direct-jars part is the union of both the direct and indirect jars of the given Java provider.


        <h2 id="merge">merge</h2>
        <p><pre class="rule-signature"><a class="anchor" href="JavaInfo.html">JavaInfo</a> java_common.merge(arg0:<a class="anchor" href="list.html">sequence</a>)</pre></p>

    Merges the given providers into a single JavaInfo.


        <h2 id="provider">provider</h2>
        <p><pre class="rule-signature"><a class="anchor" href="Provider.html">Provider</a> java_common.provider</pre></p>

    Returns the Java declared provider. <br>The same value is accessible as <code>JavaInfo</code>. <br>Prefer using <code>JavaInfo</code> in new code.



